syntax = "proto3";

import "google/protobuf/timestamp.proto";

option java_package = "mafia.server.web";
option java_outer_classname = "WebProtocol";

message Request {
  enum Command {
    UNKNOWN = 0;

    // 10 ~ 19 유저 관련
    USER_CREATE = 10;
    USER_GET_INFO = 11;
  }

  Command command = 1;
  string lang = 2;

  oneof body {
    // 10 ~ 19 유저 관련
    UserCreateReq user_create_req = 10;
    UserGetInfoReq user_get_info_req = 11;
  }
}

message UserCreateReq {
  string nickname = 1;
}

message UserGetInfoReq {

}

message Response {
  // 요청의 유효성에 대한 결과
  enum Result {
    UNKNOWN = 0;
    SUCCESS = 1;
    FAILURE = 2;
  }

  Request.Command command = 1;
  Result result = 2;
  string message = 3;
  google.protobuf.Timestamp timestamp = 4;

  oneof body {
    // 10 ~ 19 유저 관련
    UserCreateRes user_create_res = 10;
    UserGetInfoRes user_get_info_res = 11;
  }
}

message UserCreateRes {
  enum UserCreateResult {
    UNKNOWN = 0;
    SUCCESS = 1;
    EXISTS_USER = 2; // 이미 해당 계정의 유저가 있는 경우
    EXISTS_NICKNAME = 3;
    INVALID_NICKNAME = 4;
  }
  UserCreateResult user_create_result = 1;
}

message UserGetInfoRes {
  enum UserGetInfoResult {
    UNKNOWN = 0;
    SUCCESS = 1;
    USER_NOT_FOUND = 2; // USER_CREATE 요청 필요
  }
  UserGetInfoResult user_get_info_result = 1;
  string nickname = 2;
  int32 level = 3;
  int64 exp = 4;
}
